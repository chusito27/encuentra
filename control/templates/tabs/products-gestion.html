<!-- Contenido de la Pestaña de Gestión de Productos -->

<!-- 1. VISTA DE LISTA (lo que ya tenías) -->
<div id="productsListView">
    <div class="action-buttons-container" style="justify-content: space-between; align-items: center;">
        <h2>Gestión de Productos</h2>
        <button id="addNewProductButton">Añadir Nuevo Producto</button>
    </div>
    <!-- NUEVO: Contenedor para filtros y búsqueda -->
    <div id="product-filters" class="filters-container">
        <input type="text" id="productSearchInput" placeholder="Buscar por nombre...">
        <select id="productSortSelect">
            <option value="order-asc">Ordenar por: Orden (defecto)</option>
            <option value="name-asc">Nombre (A-Z)</option>
            <option value="name-desc">Nombre (Z-A)</option>
            <option value="price-desc">Precio (Mayor a menor)</option>
            <option value="price-asc">Precio (Menor a mayor)</option>
            <option value="profit-desc">Ganancia (Mayor a menor)</option>
            <option value="stock-asc">Stock (Menor a mayor)</option>
        </select>
    </div>
    <div id="productsList">
        <p>Selecciona un comercio para ver sus productos.</p>
    </div>
</div>

<!-- 2. VISTA DE FORMULARIO/EDITOR (lo que estaba en el modal) -->
<div id="productFormView" style="display: none;">
    <h2 id="productFormTitle">Añadir Producto</h2>
    <form id="productForm">
        <input type="hidden" id="productId">
        <div class="product-form-tabs">
            <!-- Botones de las Pestañas -->
            <div class="tab-buttons">
                <button type="button" class="tab-button active" data-tab="general">General</button>
                <button type="button" class="tab-button" data-tab="precio">Precio</button>
                <button type="button" class="tab-button" data-tab="imagenes">Imágenes</button>
                <button type="button" class="tab-button" data-tab="categorias">Categorías</button>
                <button type="button" class="tab-button" data-tab="opciones">Opciones</button>
            </div>

            <!-- Paneles de Contenido de las Pestañas -->
            <div class="tab-content-panels">
                <!-- Pestaña General -->
                <div id="tab-general" class="tab-panel active">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="productName">Nombre del Producto</label>
                            <input type="text" id="productName" required>
                        </div>
                        <div class="form-group">
                            <label for="productOrder">Orden</label>
                            <input type="number" id="productOrder" value="0">
                        </div>
                        <div class="form-group">
                            <label for="productStock">Cantidad en Stock</label>
                            <input type="number" id="productStock" step="1" placeholder="Dejar en blanco para stock ilimitado">
                        </div>
                        <div class="form-group form-group-span-2">
                            <label for="productDescription">Descripción Corta</label>
                            <textarea id="productDescription" rows="3"></textarea>
                        </div>
                        <div class="form-group form-group-span-2">
                            <label for="productDetails">Detalles Adicionales</label>
                            <textarea id="productDetails" rows="5"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Pestaña Precio -->
                <div id="tab-precio" class="tab-panel">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="productPrice">Precio de Venta</label>
                            <input type="number" id="productPrice" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="productCostPrice">Precio Costo</label>
                            <input type="number" id="productCostPrice" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Ganancia</label>
                            <p id="productProfit" class="form-static-text">₡0.00</p>
                        </div>
                        <div class="form-group">
                            <label for="productOldPrice">Precio Anterior (para ofertas)</label>
                            <input type="number" id="productOldPrice" step="0.01">
                        </div>
                    </div>
                </div>

                <!-- Pestaña Imágenes -->
                <div id="tab-imagenes" class="tab-panel">
                    <div class="form-group">
                        <label>Imágenes del Producto (Máx. 5, la primera es la principal)</label>
                        <div id="productImagesPreview" class="image-preview-grid"></div>
                        <div class="image-upload-controls">
                            <input type="text" id="productImageUrlInput" placeholder="Pega una URL de imagen y presiona Enter">
                            <label for="productImageUploads" class="file-upload-label">
                                <i class="fas fa-upload"></i> Subir Archivos
                            </label>
                            <input type="file" id="productImageUploads" accept="image/*" multiple style="display: none;">
                        </div>
                        <input type="hidden" id="productImages">
                    </div>
                </div>

                <!-- Pestaña Categorías -->
                <div id="tab-categorias" class="tab-panel">
                    <div class="form-group">
                        <label>Categorías</label>
                        <div id="productCategoriesContainer" class="category-selector-grid"></div>
                    </div>
                </div>

                <!-- Pestaña Opciones -->
                <div id="tab-opciones" class="tab-panel">
                    <div class="form-group">
                        <label>Opciones Alimentarias</label>
                        <div class="checkbox-group-vertical">
                            <div class="checkbox-item"><input type="checkbox" id="isGlutenFree"><label for="isGlutenFree">Sin Gluten</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="isVegan"><label for="isVegan">Vegano</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="isVegetarian"><label for="isVegetarian">Vegetariano</label></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-actions">
            <button type="button" id="cancelProductEdit" class="cancel">Cancelar</button>
            <button type="submit">Guardar Producto</button>
        </div>
    </form>
</div>