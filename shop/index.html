<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Directorio de Comercios</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="manifest" href="./manifest.json">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </noscript>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>
    <div class="top-bar">
        <div class="top-bar-right-icons">
            <a href="../index.html" id="home-icon" class="header-icon">
                <i class="fas fa-home"></i>
            </a>
            <i class="fas fa-sun settings-icon" id="settings-icon" title="Toggle Dark/Light Mode"></i>
            <div class="cart-icon-container" id="top-cart-icon-container">
                <div class="cart-icon"></div>
                <span class="cart-count" id="cart-count">0</span>
                <span class="cart-total" id="cart-total">₡0.00</span>
            </div>
        </div>
        <div class="search-bar">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="search-input" placeholder="Buscar productos...">
        </div>
    </div>

    <div class="container">
        <div class="categories" id="categories-menu">
        </div>

        <div class="products" id="product-list">
        </div>
    </div>

    <!-- Pantalla del Carrito (reemplaza el modal anterior) -->
    <div id="cart-screen" class="cart-screen hidden">
        <div class="cart-header">
            <button id="back-to-shop-btn" class="header-icon"><i class="fas fa-arrow-left"></i></button>
            <h2>Tu Carrito</h2>
            <div class="header-icon"></div> <!-- Espaciador -->
        </div>
        <div class="cart-content">
            <ul id="cart-items-container">
                <!-- Los artículos del carrito se insertarán aquí -->
            </ul>
            <div class="cart-summary">
                <p id="cart-screen-total-price">Total: ₡0.00</p>
                <div class="modal-order-options">
                    <input type="checkbox" id="express-delivery">
                    <label for="express-delivery">¿Marcar si necesitas servicio <strong>express</strong>?</label>
                </div>
                <div class="modal-order-notes">
                    <label for="modal-order-changes">Notas o consideraciones especiales:</label>
                    <textarea id="modal-order-changes"></textarea>
                </div>
                <button class="modal-whatsapp-button" id="send-order-button">Enviar Pedido por WhatsApp</button>
            </div>
        </div>
    </div>

    <!-- Pantalla de Información del Comercio -->
    <div id="info-screen" class="info-screen hidden">
        <div class="info-header">
            <button id="back-to-shop-from-info-btn" class="header-icon"><i class="fas fa-arrow-left"></i></button>
            <h2>Información</h2>
            <div class="header-icon"></div> <!-- Espaciador -->
        </div>
        <div class="info-content">
            <img id="info-main-image" src="" alt="Imagen del comercio" class="info-main-image">
            <h3 id="info-name"></h3>
            <p id="info-short-description"></p>
            
            <div class="info-actions">
                <a id="info-website-link" href="#" target="_blank" class="info-button" style="display: none;"><i class="fas fa-globe"></i><span>Sitio Web</span></a>
                <a id="info-maps-link" href="#" target="_blank" class="info-button" style="display: none;"><i class="fas fa-map-marker-alt"></i><span>Mapa</span></a>
                <a id="info-phone-link" href="#" class="info-button" style="display: none;"><i class="fas fa-phone"></i><span>Contactar</span></a>
            </div>

            <div id="info-schedule-container" class="info-section" style="display: none;">
                <h4>Horario</h4>
                <p id="info-schedule"></p>
            </div>

            <div id="info-description-container" class="info-section" style="display: none;">
                <h4>Sobre nosotros</h4>
                <p id="info-full-description"></p>
            </div>

            <div id="info-gallery-container" class="info-section" style="display: none;">
                <h4>Galería</h4>
                <div id="info-gallery" class="info-gallery">
                    <!-- Las fotos adicionales se insertarán aquí -->
                </div>
            </div>
        </div>
    </div>

    <div id="productDetailModal" class="modal">
        <div class="modal-content detail-modal-content">
            
            <div class="detail-main-info">
                <img id="detail-image" src="" alt="Imagen del producto">
                <div class="detail-text-content">
                    <div id="detail-categories" class="detail-categories">
                        <!-- Categorías se insertarán aquí -->
                    </div>
                    <h3 id="detail-name"></h3>
                    <div id="detail-price-container" class="detail-price-container">
                        <!-- El precio se insertará aquí -->
                    </div>
                    <p id="detail-description"></p>
                </div>
            </div>

            <div id="detail-tags" class="detail-tags">
                <!-- Iconos de tags (vegano, etc.) se insertarán aquí -->
            </div>
            
            <div id="detail-additional-info-container" class="info-section" style="display: none;">
                <h4>Detalles Adicionales</h4>
                <p id="detail-additional-info"></p>
            </div>

            <div class="modal-footer">
                <button id="add-to-cart-from-detail" class="add-to-cart-button">Añadir al carrito</button>
            </div>
        </div>
    </div>

    <!-- Footer Menu -->
    <footer class="footer-menu">
        <button class="footer-item" id="footer-home" aria-label="Inicio">
            <i class="fas fa-home"></i>
        </button>
        <button class="footer-item" id="footer-cart" aria-label="Ver carrito">
            <i class="fas fa-shopping-cart"></i>
        </button>
        <button class="footer-item" id="footer-info" aria-label="Información">
            <i class="fas fa-shop"></i>
        </button>
<!--         <button class="footer-item" id="footer-profile" aria-label="Perfil">
            <i class="fas fa-user"></i>
        </button> -->
    </footer>

    <script src="./app.js" type="module"></script>

    <!-- AÑADIR ESTE NUEVO MODAL AQUÍ -->
    <div id="emptyCartModal" class="modal">
        <div class="modal-content small-modal">
            <span class="close-button" id="closeEmptyCartModal">&times;</span>
            <i class="fas fa-shopping-cart modal-main-icon"></i>
            <h2>Carrito Vacío</h2>
            <p>Parece que aún no has añadido productos a tu carrito.</p>
            <button id="closeEmptyCartModalBtn" class="button">Ver productos</button>
        </div>
    </div>

</body>

</html>